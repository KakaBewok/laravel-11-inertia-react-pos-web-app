import{j as e,y as d}from"./app-BmY1Do-R.js";import{B as g}from"./button-CoCtyn1R.js";import{o as C,s as p,u as w,t as S,F as v,a as x,b as u,c as i,d as h,e as j,T as E}from"./index-DAbcSfye.js";import{H as T}from"./heading-DRkXQex5.js";import{I as B}from"./input-DLUMN1d1.js";import{u as A}from"./useGlobalContext-DEDc1K2H.js";import{B as H}from"./react-toastify.esm-DQOW_WDH.js";import"./index-BG4KsFYa.js";import"./utils-CcFn7B-c.js";import"./clsx-B-dksMZM.js";import"./index-CgiO58h2.js";const I=C({name:p().min(3,{message:"Category must contain at least 3 character(s)"}),description:p().optional()}),O=({initialData:r})=>{const{loading:c,setLoading:a}=A(),b=r?"Edit category":"Create category",f=r?"Edit a category":"Add a new category",y=r?"Category updated.":"Category created.",k=r?"Save changes":"Create",o=w({resolver:S(I),defaultValues:{name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||""}}),F=s=>{a(!0);const t=()=>{o.reset()},n=()=>{t(),d.visit(route("admin.category.index")),setTimeout(()=>{H.success(y,{position:"top-center"})},1e3)},m=N=>{console.log("An error occurred: ",N)},l=()=>a(!1);r?d.post(route("admin.category.update",r==null?void 0:r.id),{...s,_method:"PATCH"},{onSuccess:n,onError:m,onFinish:l}):d.post(route("admin.category.store"),s,{onSuccess:n,onError:m,onFinish:l})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between pb-5",children:[e.jsx(T,{title:b,description:f}),e.jsx(g,{variant:"outline",onClick:()=>window.history.back(),className:"dark:bg-slate-200 dark:text-slate-900",children:"Back"})]}),e.jsx(v,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(F),className:"w-full p-8 space-y-8 rounded-md bg-slate-50 dark:bg-gradient-to-tr md:dark:bg-gradient-to-br dark:from-slate-950 dark:via-slate-900 dark:to-slate-800",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-8 md:grid-cols-2",children:[e.jsx(x,{control:o.control,name:"name",render:({field:s,fieldState:t})=>e.jsxs(u,{children:[e.jsx(i,{className:t.error?"text-red-500":"dark:text-gray-300",children:"Name"}),e.jsx(h,{children:e.jsx(B,{className:"dark:bg-slate-700",disabled:c,placeholder:"Strong coffee",...s})}),e.jsx(j,{className:"dark:text-red-500"})]})}),e.jsx(x,{control:o.control,name:"description",render:({field:s,fieldState:t})=>e.jsxs(u,{children:[e.jsx(i,{className:t.error?"text-red-500":"dark:text-gray-300",children:"Description"}),e.jsx(h,{children:e.jsx(E,{className:"w-full h-32 max-w-lg max-h-40 dark:bg-slate-700",disabled:c,placeholder:"Describe about strong coffee.",...s})}),e.jsx(j,{className:"dark:text-red-500"})]})})]}),e.jsx(g,{disabled:c,className:"w-full lg:w-1/2",type:"submit",children:k})]})})]})};export{O as CategoryForm};
