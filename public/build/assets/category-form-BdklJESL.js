import{r as v,j as e,y as c}from"./app-BDFo6oUw.js";import{B as d}from"./button-DArU0F6p.js";import{o as S,s as i,u as E,t as T,F as A,a as p,b as u,c as h,d as f,e as b}from"./index-DdakI-U2.js";import{H as B}from"./heading-CbGLtiTL.js";import{I}from"./input-Ci5xMt7U.js";import{T as H}from"./textarea-CeYXHsLJ.js";import{u as L}from"./useGlobalContext-CJNLfktq.js";import{B as M}from"./react-toastify.esm-6DYMdDcn.js";import"./index-C-Wu41O2.js";import"./utils-CcFn7B-c.js";import"./clsx-B-dksMZM.js";import"./index-DSKujPjE.js";const G=S({name:i().min(3,{message:"Category must contain at least 3 character(s)"}),description:i().optional()}),W=({initialData:s})=>{const{loading:a,setLoading:n}=L(),[j,m]=v.useState(!1),y=s?"Edit category":"Create category",k=s?"Edit a category":"Add a new category",C=s?"Category updated.":"Category created.",F=s?"Save changes":"Create",o=E({resolver:T(G),defaultValues:{name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||""}}),N=r=>{n(!0);const t=()=>{o.reset()},l=()=>{t(),j?c.visit(route("admin.category.create")):c.visit(route("admin.category.index")),setTimeout(()=>{M.success(C,{position:"top-center"})},1e3)},x=w=>{console.log("An error occurred: ",w)},g=()=>n(!1);s?c.post(route("admin.category.update",s==null?void 0:s.id),{...r,_method:"PATCH"},{onSuccess:l,onError:x,onFinish:g}):c.post(route("admin.category.store"),r,{onSuccess:l,onError:x,onFinish:g})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between pb-5",children:[e.jsx(B,{title:y,description:k}),e.jsx(d,{variant:"outline",onClick:()=>window.history.back(),className:"dark:bg-slate-200 dark:text-slate-900",children:"Back"})]}),e.jsx(A,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"w-full p-8 space-y-8 rounded-md bg-slate-50 dark:bg-gradient-to-tr md:dark:bg-gradient-to-br dark:from-slate-950 dark:via-slate-900 dark:to-slate-800",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-8 md:grid-cols-2",children:[e.jsx(p,{control:o.control,name:"name",render:({field:r,fieldState:t})=>e.jsxs(u,{children:[e.jsxs(h,{className:t.error?"text-red-500":"dark:text-gray-300",children:["Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(f,{children:e.jsx(I,{className:"dark:bg-slate-700",disabled:a,placeholder:"Strong coffee",...r})}),e.jsx(b,{className:"dark:text-red-500"})]})}),e.jsx(p,{control:o.control,name:"description",render:({field:r,fieldState:t})=>e.jsxs(u,{children:[e.jsx(h,{className:t.error?"text-red-500":"dark:text-gray-300",children:"Description"}),e.jsx(f,{children:e.jsx(H,{className:"w-full h-32 max-w-lg max-h-40 dark:bg-slate-700",disabled:a,placeholder:"Describe about strong coffee.",...r})}),e.jsx(b,{className:"dark:text-red-500"})]})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-between w-full gap-4 mt-10 md:w-1/2 lg:flex-row",children:[e.jsx(d,{disabled:a,className:"w-full",type:"submit",onClick:()=>m(!1),children:F}),e.jsx(d,{disabled:a,className:`${s?"hidden":""} w-full bg-slate-300 text-slate-950 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200`,type:"submit",onClick:()=>m(!0),children:"Create & Create another"})]})]})})]})};export{W as CategoryForm};
